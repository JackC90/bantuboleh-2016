

<% if @user.organisation? %>
  <% if current_user == @user %>
    <div class="col-lg-12 ">
      <% render partial: "users/carousel" %>
        <div class="card-info"> <span class="card-title"><%= @user.organisation_profile.name %></span>
        </div>
      <div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
        <div class="btn-group" role="group">
          <button type="button" id="my profiles" class="btn btn-primary" href="#tab1" data-toggle="tab">
            <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
            <div class="hidden-xs">My Profile</div>
          </button>
        </div>
        <div class="btn-group" role="group">
          <button type="button" id="my events" class="btn btn-default" href="#tab2" data-toggle="tab">
            <span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
            <div class="hidden-xs">My Events</div>
          </button>
        </div>
      </div>
      <div class="well">
        <div class="tab-content">
          <div class="tab-pane fade in active" id="tab1">
            <div class="organization-description"?>
              <div class="container">
                <div class="col-md-6">
                  <div class="event-details">
                    <h2>Contact US!</h2>
                    <p>Website: <a href="<%= @user.organisation_profile.website %>"><%= @user.organisation_profile.name %></a></p>
                    <p>Contact-Person: <%= @user.organisation_profile.contact_person %></p>
                    <p>Contact Number: <%= @user.organisation_profile.phone %></p>
                    <p>Email: <%= @user.organisation_profile.email %></p>
                    <p>Email: <%= @user.organisation_profile.email if @user.organisation_profile.email.present? %></p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="event-description">
                    <h2>Organization Description</h2>
                    <p><%= @user.organisation_profile.org_description %></p>
                  </div>
                  <div class="address">
                    <h2>Address: <%= @user.organisation_profile.address %>, <%= @user.organisation_profile.postal_code %>, <%= @user.organisation_profile.city %> <%= @user.organisation_profile.state %></h2>
                    <div id="map"></div>
                  </div>
                </div>
              </div>
            </div>
            <%= link_to "Edit Profile", edit_user_registration_path, type: "button", class: "btn btn-default"%>
          </div>
          <div class="tab-pane fade in" id="tab2">
            <h3>Upcoming Events</h3>
            <ol>
              <% @events_open.each do |event| %>
                <li><%= link_to event.title, event %> <%= link_to 'Edit', edit_event_path(event), type: 'button', class: 'btn btn-default' %></li>
              <% end %>
            </ol>
            <h3>Past Events</h3>
            <ol>
              <% @events_expired.each do |event| %>
                <li><%= link_to event.title, event %> <%= link_to 'Edit', edit_event_path(event), type: 'button', class: 'btn btn-default' %></li>
              <% end %>
            </ol>
          </div>
        </div>
      </div>
    </div>

  <% else %>
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <h2><%= @user.organisation_profile.name %></h2>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <div class="event-details">
            <h2>Contact US!</h2>
            <p>Website: <a href="<%= @user.organisation_profile.website %>"><%= @user.organisation_profile.name %></a></p>
            <p>Contact-Person: <%= @user.organisation_profile.contact_person %></p>
            <p>Contact Number: <%= @user.organisation_profile.phone %></p>
            <p>Email: <%= @user.organisation_profile.email %></p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="event-description">
            <h2>Organization Description</h2>
            <p><%= @user.organisation_profile.org_description %></p>
          </div>
          <div class="address">
            <h2>Address: <%= @user.organisation_profile.address %>, <%= @user.organisation_profile.postal_code %>, <%= @user.organisation_profile.city %> <%= @user.organisation_profile.state %></h2>
            <div id="map"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <h3 class="page-header">Related Events</h3>
        </div>
        <% @events.each do |event| %>
        <div class="col-lg-4 col-sm-6">
          <a href ="<%=event_path(event) %>"><img class="img-responsive img-hover img-related" src="http://placehold.it/500x300" alt=""></a>
          <%= event.title %> </br>
          <%= event.description %></br>
          <%= event.start_date %></br>
          <%= event.end_date %></br>
          <%= event.category %>
        </div>
        <% end %>
      </div>
    </div>
    <%= will_paginate @events, renderer: BootstrapPagination::Rails %>
    <%= page_entries_info @events %>
  <% end %>
<% elsif @user.volunteer? %>
  <div class="col-lg-12 ">
    <div class="card hovercard">
      <div class="card-background">
         <img class="card-bkimg" alt="" src="http://lorempixel.com/100/100/people/9/">
         <!-- http://lorempixel.com/850/280/people/9/ -->
      </div>
      <div class="useravatar">
         <img alt="" src="http://lorempixel.com/100/100/people/9/">
      </div>
      <div class="card-info"> <span class="card-title">Pamela Anderson</span>
      </div>
   </div>
   <div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
      <div class="btn-group" role="group">
         <button type="button" id="my profiles" class="btn btn-primary" href="#tab1" data-toggle="tab">
            <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
            <div class="hidden-xs">My Profile</div>
         </button>
      </div>
      <div class="btn-group" role="group">
         <button type="button" id="my events" class="btn btn-default" href="#tab2" data-toggle="tab">
            <span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
            <div class="hidden-xs">My Events</div>
         </button>
      </div>
   </div>
   <div class="well">
      <div class="tab-content">
         <div class="tab-pane fade in active" id="tab1">
            <div class="volunteer-description">
               <h3>Biography</h3>
               <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Itaque, optio corporis quae nulla aspernatur in alias at numquam rerum ea excepturi expedita tenetur assumenda voluptatibus eveniet incidunt dicta nostrum quod?</p>
            </div>
            <div class="Basic Information">
               <h3>About Me!</h3>
               <p>Date of Birth: 01-01-1991</p>
               <p>Hometown: Georgetown, Penang</p>
               <p>Language spoken: English</p>
               <p>Email: pamela.anderson@gmail.com</p>
               <p>Gender: Female</p>
            </div>
            <%= link_to "Edit Profile", edit_user_registration_path, type: "button", class: "btn btn-default"%>
         </div>
         <div class="tab-pane fade in" id="tab2">
            <h3>Upcoming Events</h3>
            <ol>
              <% @volunteered_events_open.each do |event| %>
                <li><%= link_to event.title, event %></li>
              <% end %>
            </ol>
            <h3>Past Events</h3>
            <ol>
              <% @volunteered_events_expired.each do |event| %>
                <li><%= link_to event.title, event %> </li>
              <% end %>
            </ol>
         </div>
      </div>
   </div>
  </div> 
<% end %> 




<!-- jQuery -->
<% if user_signed_in? && @user.organisation? %>
<script>
  $(document).ready(function() {
        $(".btn-pref .btn").click(function () {
            $(".btn-pref .btn").removeClass("btn-primary").addClass("btn-default");
            // $(".tab").addClass("active"); // instead of this do the below 
            $(this).removeClass("btn-default").addClass("btn-primary");   
        });
    });
  //set placeholder variables
  var map; //the map element
  var marker; //the map marker object(?) element(?)
  var geocoder; //geocoder tool object

  //define the location of next academy
  //var latlng; //= {lat: < %= @event.event_detail.latitude %>, lng: < %= @event.event_detail.longitude %>}

  //the function that the google map api will call right after running their js script
  function initMap() {
      var latlng;
      geocoder = new google.maps.Geocoder();
        geocoder.geocode({
          'address': "<%= @user.organisation_profile.address %>, <%= @user.organisation_profile.postal_code %>, <%= @user.organisation_profile.city %> <%= @user.organisation_profile.state %>"
        }, function(results,status) {
          if (status == google.maps.GeocoderStatus.OK) {
            if (results[0]) {
              latlng = {lat: results[0].geometry.location.lat(), lng: results[0].geometry.location.lng()}
              walaoeehh(latlng);
            }
            else
            {
              latlng = {lat: 3.27229523935188, lng: 101.570401983462}
              walaoeehh(latlng);
            }
          }
          else
          {
            latlng = {lat: 3.27229523935188, lng: 101.570401983462}
            walaoeehh(latlng);
          }
        })

        //define the map (the part that showing the map when initMap is ran)
        

      //define geocoder
      // geocoder = new google.maps.Geocoder();

      // //when user click on map
      // google.maps.event.addListener(map,'click',function(event) {
      //     //get latitude(lat) and longitude(lng)
      //     document.getElementById('latspan').innerHTML = event.latLng.lat()
      //     document.getElementById('lngspan').innerHTML = event.latLng.lng()

      //     //set marker to the click position
      //     marker.setPosition({ lat: event.latLng.lat(), lng: event.latLng.lng() })

      //     //get the address with geocoder
      //     geocoder.geocode({
      //     'latLng': event.latLng
      //     }, function(results, status) {
      //         if (status == google.maps.GeocoderStatus.OK) {
      //             if (results[0]) {
      //                 document.getElementById('address-span').innerHTML = results[0].formatted_address;
      //             }
      //         }
      //     });
      // });
  }
  function walaoeehh(latlng)
  {
    map = new google.maps.Map(document.getElementById('map'), {
        center: latlng, 
        zoom: 8
      });

      //set the marker into next academy
      marker = new google.maps.Marker({
        position: latlng,
        map: map
      });

      //the function that set the initial zoom of the map
      map.setZoom(15);
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBOu5_6K5qsQqXlySNAMGy7j9WPkRZZXrg&callback=initMap"
async defer></script>
<% end %>